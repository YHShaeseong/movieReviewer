<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pictos - 취향 설문</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <!-- ==================== 취향 확인 팝업 섹션 ==================== -->
  <!-- 사용자가 처음 사이트에 접속했을 때 표시되는 팝업 창입니다. -->
  <!-- 사용자의 영화 취향을 파악하기 위한 질문들을 포함합니다. -->
  <section class="preference-popup" id="surveyPopup">
    <div class="popup-overlay"></div>
    <div class="popup-container">
      <button class="popup-close" id="popupClose">&times;</button>

      <div class="popup-header">
        <h2>당신의 영화 취향을 알려주세요!</h2>
        <p>몇 가지 질문으로 맞춤 영화를 추천해드립니다</p>
      </div>

      <div class="popup-content">
        <!-- 1단계: 5가지 질문 -->
        <div class="survey-step" id="firstPopup">
          <div class="step-indicator">
            <span class="step-number active">1</span>
            <span class="step-divider"></span>
            <span class="step-number">2</span>
          </div>

          <!-- Q1: 인생 영화 -->
          <div class="question-block">
            <label class="question-label">
              <span class="question-number">Q1.</span>
              당신의 인생 영화는 무엇인가요?
            </label>
            <input
              type="text"
              id="favoriteMovie"
              class="movie-search-input"
              placeholder="영화 제목을 입력하세요 (예: 인터스텔라)"
              autocomplete="off"
            >
            <div class="search-results" id="movieSearchResults"></div>
          </div>

          <!-- Q2: 선호 장르 -->
          <div class="question-block">
            <label class="question-label">
              <span class="question-number">Q2.</span>
              선호하는 장르를 모두 선택해주세요 (복수 선택 가능)
            </label>
            <div class="checkbox-grid">
              <label class="checkbox-item">
                <input type="checkbox" name="genre" value="28">
                <span>액션</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="genre" value="35">
                <span>코미디</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="genre" value="18">
                <span>드라마</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="genre" value="10749">
                <span>로맨스</span>
              </label>
            </div>
          </div>

          <!-- Q3: 선호 무드 -->
          <div class="question-block">
            <label class="question-label">
              <span class="question-number">Q3.</span>
              어떤 무드의 영화를 선호하시나요?
            </label>
            <div class="radio-grid">
              <label class="radio-item">
                <input type="radio" name="mood" value="happy">
                <span>밝고 경쾌한</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="mood" value="dark">
                <span>어둡고 무거운</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="mood" value="emotional">
                <span>감성적이고 따뜻한</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="mood" value="intense">
                <span>긴장감 넘치는</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="mood" value="thoughtful">
                <span>철학적이고 성찰적인</span>
              </label>
            </div>
          </div>

          <!-- Q4: 불호 요소 -->
          <div class="question-block">
            <label class="question-label">
              <span class="question-number">Q4.</span>
              피하고 싶은 장르가 있나요? (복수 선택 가능)
            </label>
            <div class="checkbox-grid">
              <label class="checkbox-item">
                <input type="checkbox" name="dislike" value="violence">
                <span>과도한 폭력</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="dislike" value="horror">
                <span>공포 요소</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="dislike" value="sad">
                <span>슬픈 결말</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="dislike" value="slow">
                <span>느린 전개</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="dislike" value="complex">
                <span>복잡한 스토리</span>
              </label>
            </div>
          </div>

          <!-- Q5: 탐색 스타일 -->
          <div class="question-block">
            <label class="question-label">
              <span class="question-number">Q5.</span>
              영화를 고를 때 어떤 기준을 중요하게 생각하시나요?
            </label>
            <div class="radio-grid">
              <label class="radio-item">
                <input type="radio" name="exploration" value="popularity.desc">
                <span>인기도 (많은 사람들이 본 영화)</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="exploration" value="vote_average.desc">
                <span>평점 (평가가 좋은 영화)</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="exploration" value="release_date.desc">
                <span>최신성 (최근 개봉한 영화)</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="exploration" value="revenue.desc">
                <span>흥행성 (박스오피스 성공작)</span>
              </label>
            </div>
          </div>

          <button class="btn-next" id="btnNextToRating">다음 단계로</button>
        </div>

        <!-- 2단계: 별점 평가 -->
        <div class="survey-step hidden" id="secondPopup">
          <div class="step-indicator">
            <span class="step-number completed">1</span>
            <span class="step-divider"></span>
            <span class="step-number active">2</span>
          </div>

          <div class="step2-header">
            <h3>거의 다 왔어요! 🎬</h3>
            <p>아래 영화들에 별점을 매겨주세요. 더 정확한 추천을 위해 사용됩니다.</p>
          </div>

          <div class="rating-grid" id="movieRatingGrid">
            <!-- JavaScript에서 동적으로 생성됨 -->
          </div>

          <button class="btn-analyze" id="btnAnalyzeComplete">취향 분석 완료</button>
        </div>

        <!-- 3단계: 결과 -->
        <div class="survey-step hidden" id="resultPopup">
          <div class="result-header">
            <h3>🎉 분석이 완료되었습니다!</h3>
            <p>당신의 취향을 기반으로 선별한 추천 영화입니다</p>
          </div>

          <div class="result-profile" id="userProfileSummary">
            <!-- 사용자 프로필 요약 -->
          </div>

          <div class="result-movies" id="recommendedMoviesList">
            <!-- 추천 영화 5편 -->
          </div>

          <button class="btn-start" id="btnStartBrowsing">영화 탐색 시작하기</button>
        </div>
      </div>

      <div class="popup-footer">
        <button class="btn-skip" id="btnSkipSurvey">건너뛰기</button>
        <button class="btn-submit" id="btnSubmitSurvey">추천받기</button>
      </div>
    </div>
  </section>
  <!-- ==================== 취향 확인 팝업 섹션 끝 ==================== -->

  <!-- TMDB API 모듈 먼저 로드 (Load TMDB API module first) -->
  <script src="../js/tmdbApi.js"></script>
  <!-- 팝업 스크립트 (ES6 모듈) - Popup script (ES6 module) -->
  <script type="module" src="../js/popup.js"></script>
</body>
</html>
