<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pictos</title>
  <link rel="stylesheet" href="src/css/style.css">
  <link rel="stylesheet" href="src/css/profile-styles.css">
</head>
<body>
  <!-- ==================== 취향 확인 팝업 (iframe) ==================== -->
  <iframe id="popupFrame" src="/src/pages/popup.html" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; border: none; z-index: 10000;"></iframe>
  <!-- ==================== 취향 확인 팝업 끝 ==================== -->

  <!-- 헤더: 로고, 검색, 메뉴 -->
  <header class="header">
    <div class="logo">Pictos</div>
    <input type="text" id="searchInput" placeholder="영화 제목, 배우, 감독을 검색하세요...">
    <nav>
      <a href="#top100">TOP100 영화</a>
      <a href="#genres">추천 장르</a>
      <button id="watchlistBtn" class="watchlist-btn">Watchlist</button>
      <button class="login-btn">로그인</button>
      <span id="userInfo" class="user-info" style="display: none;">
        <button id="profileBtn" class="profile-btn" title="프로필">
          <span class="profile-icon">👤</span>
        </button>
        <span id="userName"></span>
        <button id="logoutBtn" class="logout-btn">로그아웃</button>
      </span>
    </nav>
  </header>

  <!-- 로그인/회원가입 모달 -->
  <div id="authModal" class="modal" style="display: none;">
    <div class="modal-content">
      <span class="modal-close">&times;</span>
      <h2 id="authTitle">로그인</h2>
      <form id="authForm">
        <input type="text" id="authUsername" placeholder="아이디" required>
        <input type="password" id="authPassword" placeholder="비밀번호" required>
        <button type="submit" id="authSubmitBtn">로그인</button>
        <p class="auth-switch">
          <span id="authSwitchText">계정이 없으신가요?</span>
          <a href="#" id="authSwitchLink">회원가입</a>
        </p>
      </form>
    </div>
  </div>

  <!-- Watchlist 로그인 필요 모달 -->
  <div id="watchlistLoginModal" class="modal" style="display: none;">
    <div class="modal-content">
      <span class="modal-close">&times;</span>
      <h2>로그인이 필요합니다</h2>
      <p>지금까지의 취향 정보와 저장 목록을 모두 보관할 수 있어요!</p>
      <button id="goToLoginBtn" class="btn-primary">로그인하러 가기</button>
    </div>
  </div>

  <!-- 영화 상세 모달 -->
  <div id="movieDetailModal" class="modal" style="display: none;">
    <div class="modal-content movie-detail-modal">
      <span class="modal-close">&times;</span>
      <div id="movieDetailContent" class="movie-detail-content">
        <!-- JavaScript에서 동적으로 생성됨 -->
      </div>
    </div>
  </div>

  <!-- 프로필 모달 -->
  <div id="profileModal" class="modal" style="display: none;">
    <div class="modal-content profile-modal-content">
      <span class="modal-close">&times;</span>
      <h2>내 프로필</h2>
      <div class="profile-info">
        <!-- 사용자 기본 정보 -->
        <div class="profile-header-section">
          <div class="profile-avatar">👤</div>
          <div class="profile-user-details">
            <h3 id="profileUsername">사용자</h3>
            <p id="profileJoinDate" class="profile-meta">가입일: -</p>
          </div>
        </div>

        <div class="profile-divider"></div>

        <!-- 취향 통계 -->
        <div class="profile-stats">
          <div class="stat-item">
            <span class="stat-number" id="profileGenreCount">0</span>
            <span class="stat-label">선호 장르</span>
          </div>
          <div class="stat-item">
            <span class="stat-number" id="profileRatingCount">0</span>
            <span class="stat-label">평가한 영화</span>
          </div>
          <div class="stat-item">
            <span class="stat-number" id="profileAvgRating">-</span>
            <span class="stat-label">평균 별점</span>
          </div>
        </div>

        <div class="profile-divider"></div>

        <!-- 선호 장르 -->
        <div class="profile-section">
          <h3>🎬 선호하는 장르</h3>
          <div id="profileGenres" class="profile-tags"></div>
        </div>

        <!-- 선호 무드 -->
        <div class="profile-section">
          <h3>🎭 선호하는 무드</h3>
          <div id="profileMood" class="profile-tags"></div>
        </div>

        <!-- 탐색 스타일 -->
        <div class="profile-section">
          <h3>🔍 영화 선택 기준</h3>
          <div id="profileExploration" class="profile-tags"></div>
        </div>

        <!-- 피하고 싶은 장르 -->
        <div class="profile-section">
          <h3>🚫 피하고 싶은 장르</h3>
          <div id="profileDislikes" class="profile-tags"></div>
        </div>

        <!-- 평가한 영화 목록 -->
        <div class="profile-section">
          <h3>⭐ 최근 평가한 영화</h3>
          <div id="profileRatedMovies" class="profile-rated-movies"></div>
        </div>
      </div>
      <button id="editProfileBtn" class="btn-primary">프로필 수정</button>
    </div>
  </div>

  <!-- 히어로 섹션: 추천 영화 캐러셀 -->
  <section class="hero-carousel" id="heroCarousel">
    <button class="hero-nav-btn prev" id="heroPrev">‹</button>
    <button class="hero-nav-btn next" id="heroNext">›</button>

    <div class="hero-carousel-container">
      <div class="hero-carousel-track" id="heroCarouselTrack">
        <!-- JavaScript에서 동적으로 생성됨 -->
      </div>
    </div>

    <div class="hero-carousel-dots" id="heroCarouselDots">
      <!-- JavaScript에서 동적으로 생성됨 -->
    </div>
  </section>

  <!-- 오늘 이건 어떤데? 섹션 -->
  <section class="daily-recommendation">
    <div class="section-header">
      <div>
        <h2>오늘 이건 어떤데?</h2>
        <p>당신의 취향을 바탕으로 골랐어요</p>
      </div>
    </div>
    <div class="horizontal-scroll-container">
      <button class="scroll-btn prev" id="dailyPrev">‹</button>
      <div class="horizontal-scroll" id="dailyMovieScroll">
        <!-- JavaScript에서 동적으로 생성됨 -->
      </div>
      <button class="scroll-btn next" id="dailyNext">›</button>
    </div>
  </section>

  <!-- 인기 영화 TOP100 -->
  <section class="top100" id="top100">
    <div class="section-header">
      <h2>지금 가장 인기있는 영화</h2>
    </div>
    <p>실시간으로 가장 많은 사람들이 찾는 영화들</p>
    <div id="movies" class="movie-grid"></div>
    <div class="view-more-container">
      <button id="viewMoreBtn" class="view-more-btn" style="display: none;">
        더보기 (100개 전체보기)
      </button>
    </div>
  </section>

  <!-- 푸터: 로고, 링크, SNS -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-logo">Pictos</div>
      <p>개인 취향에 맞는 영화를 추천받고, 다양한 리뷰와 평점을 확인할 수 있는 최고의 영화 추천 서비스입니다.</p>
      <div class="footer-links">
        <div class="link-group">
          <h3>빠른 링크</h3>
          <a href="#">TOP100 영화</a>
          <a href="#">장르별 영화</a>
          <a href="#">추천 리뷰</a>
          <a href="#">신작 영화</a>
        </div>
        <div class="link-group">
          <h3>고객센터</h3>
          <a href="#">자주 묻는 질문</a>
          <a href="#">문의하기</a>
          <a href="#">이용약관</a>
          <a href="#">개인정보처리방침</a>
        </div>
      </div>
      <div class="footer-social">
        <span>Facebook</span>
        <span>Twitter</span>
        <span>Instagram</span>
      </div>
      <p class="copyright">© 2024 Pictos. All rights reserved.</p>
    </div>
  </footer>

  <!-- TMDB API 모듈 먼저 로드 -->
  <script src="src/js/tmdbApi.js"></script>
  <!-- 메인 스크립트 -->
  <script src="src/js/script.js"></script>
</body>
</html>
