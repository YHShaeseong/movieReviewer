# Pictos - AI 기반 영화 추천 서비스

개인 취향에 맞는 영화를 추천받고, 다양한 리뷰와 평점을 확인할 수 있는 영화 추천 서비스입니다.

## 주요 기능

### 1. 3단계 취향 분석 시스템
- **1단계: 기본 설문** - 선호 장르, 무드, 탐색 스타일 선택
- **2단계: VS 게임** - 영화 대결을 통한 3-Layer 취향 분석
- **3단계: 결과 및 추천** - 분석된 취향 기반 맞춤 영화 추천

### 2. 영화 검색 및 상세 정보
- TMDB API 기반 실시간 영화 검색
- 영화 상세 정보, 캐스트, 크루 정보 제공
- 평점, 줄거리, 예고편 등 다양한 정보 확인

### 3. Watchlist (북마크)
- 관심 영화를 Watchlist에 저장
- 로그인 사용자만 사용 가능

### 4. 사용자 프로필
- 취향 분석 결과 확인
- 선호 장르, 무드, 3-Layer 분석 결과 시각화

---

## 핵심 기술: 3-Layer 취향 분석 시스템

VS 게임을 통해 사용자의 영화 취향을 **3개 레이어**로 심층 분석합니다.

### Layer 1: 세계관 (Worldview)
사용자가 선호하는 영화의 **세계관 유형**을 파악합니다.

- **현실파 (Reality)**: 사실적이고 현실적인 이야기 선호
  - 대표 장르: 드라마, 역사물, 범죄, 전기
  - 예시 영화: 쇼생크 탈출, 대부, 쉰들러 리스트

- **환상파 (Fantasy)**: 상상력이 넘치는 세계 선호
  - 대표 장르: SF, 판타지, 모험
  - 예시 영화: 인터스텔라, 인셉션, 매트릭스

**측정 방법**: Phase 1의 Round 1-3 (3개 질문)

### Layer 2: 자극 타겟 (Stimulation)
영화를 통해 얻고 싶은 **자극의 종류**를 파악합니다.

- **두뇌 자극형 (Brain)**: 복잡한 스토리와 반전 선호
  - 대표 장르: 미스터리, 스릴러, 범죄
  - 예시 영화: 파이트 클럽, 살인의 추억

- **감성 자극형 (Heart)**: 감정선이 풍부한 이야기 선호
  - 대표 장르: 드라마, 로맨스, 가족
  - 예시 영화: 포레스트 검프, 어바웃 타임, 너의 이름은

- **액션 자극형 (Body)**: 강렬한 액션과 스릴 선호
  - 대표 장르: 액션, 공포, 어드벤처
  - 예시 영화: 다크 나이트, 덩케르크, 어벤져스

**측정 방법**: Phase 1의 Round 4-7 (4개 질문)

### Layer 3: 감성 텍스처 (Texture)
영화의 **분위기와 무게감**에 대한 선호도를 파악합니다.

#### 온도 (Temperature)
- **따뜻함 (Warm)**: 밝고 따뜻한 분위기 선호
  - 대표 장르: 애니메이션, 가족, 코미디
  - 예시 영화: 토이 스토리, 그래비티 폴즈

- **차가움 (Cold)**: 어둡고 긴장감 있는 분위기 선호
  - 대표 장르: 스릴러, 공포, 범죄
  - 예시 영화: 프레스티지, 양들의 침묵

#### 밀도 (Density)
- **가벼움 (Light)**: 편안하고 가벼운 이야기 선호
  - 대표 장르: 코미디, 애니메이션, 가족
  - 예시 영화: 카, 토이 스토리

- **무거움 (Heavy)**: 진지하고 무거운 이야기 선호
  - 대표 장르: 드라마, 전쟁, 범죄
  - 예시 영화: 라이언 일병 구하기, 양들의 침묵

**측정 방법**: Phase 1의 Round 8-10 (3개 질문)

---

## VS 게임 구조

### Phase 1: 탐색 (Round 1-10)
사용자의 취향을 **탐색**하는 단계입니다.

| 라운드 | Layer | 주제 | 영화 A | 영화 B |
|--------|-------|------|--------|--------|
| R1 | Worldview | 현실 vs 환상 | 쇼생크 탈출 | 인터스텔라 |
| R2 | Worldview | 현실 범죄 vs SF | 대부 | 인셉션 |
| R3 | Worldview | 역사 vs 미래 | 쉰들러 리스트 | 매트릭스 |
| R4 | Stimulation | 두뇌 vs 심장 | 파이트 클럽 | 포레스트 검프 |
| R5 | Stimulation | 스릴 vs 감동 | 다크 나이트 | 센과 치히로의 행방불명 |
| R6 | Stimulation | 액션 vs 로맨스 | 덩케르크 | 어바웃 타임 |
| R7 | Stimulation | 진지함 vs 유쾌함 | 그린 마일 | 시네마 천국 |
| R8 | Texture | 따뜻함 vs 차가움 | 그래비티 폴즈 | 프레스티지 |
| R9 | Texture | 가벼움 vs 무거움 | 카 | 라이언 일병 구하기 |
| R10 | Texture | 밝음 vs 어두움 | 토이 스토리 | 양들의 침묵 |

### Phase 2: 검증 (Round 11-13)
Phase 1에서 파악한 취향을 **재확인**하는 단계입니다.

| 라운드 | Layer | 주제 | 검증 내용 |
|--------|-------|------|-----------|
| R11 | Worldview | 절대 포기할 수 없는 것 | 세계관 선호도 확인 |
| R12 | Stimulation | 진짜 원하는 자극 | 자극 타겟 확인 |
| R13 | Texture | 따뜻함 vs 차가움 | 온도 선호도 확인 |

**신뢰도 조정 메커니즘**:
- Phase 1 결과와 일치하는 선택 → 신뢰도 +20% (`confidence × 1.2`)
- Phase 1 결과와 불일치하는 선택 → 신뢰도 -10% (`confidence × 0.9`)

---

## 추천 알고리즘: 가중치 기반 시스템

최종 영화 추천은 **3가지 요소**를 가중치 합산하여 결정합니다.

### 가중치 배분
```
총점 = (1단계 설문 × 50%) + (VS 게임 선택 × 30%) + (3-Layer 분석 × 20%)
```

### 1. 1단계 설문 장르 (50% 가중치)
사용자가 **직접 선택한 장르**에 가장 높은 가중치를 부여합니다.
- 각 선택 장르마다 **+5.0점** 추가

**이유**: 사용자의 명시적 선호를 가장 우선시

### 2. VS 게임 선택 영화 장르 (30% 가중치)
VS 게임에서 **실제로 선택한 영화들의 장르**를 반영합니다.
- 각 선택 영화의 장르마다 **+3.0점** 추가

**이유**: 실제 행동(선택)은 명시적 선호보다 더 정확한 취향 지표

### 3. 3-Layer 분석 결과 (20% 가중치)
3-Layer 분석으로 추론한 **장르 매핑**을 반영합니다.
- 각 Layer 속성에 매핑된 장르마다 **+2.0점** 추가

**장르 매핑 테이블**:
```javascript
{
  // Layer 1: Worldview
  reality: [36, 18, 80],        // 역사, 드라마, 범죄
  fantasy: [878, 14, 12],       // SF, 판타지, 모험

  // Layer 2: Stimulation
  brain: [9648, 53, 80],        // 미스터리, 스릴러, 범죄
  heart: [10749, 18, 10751],    // 로맨스, 드라마, 가족
  body: [28, 27, 12],           // 액션, 공포, 모험

  // Layer 3: Texture
  warm: [35, 10751, 16],        // 코미디, 가족, 애니메이션
  cold: [53, 80, 9648],         // 스릴러, 범죄, 미스터리
  light: [35, 28],              // 코미디, 액션
  heavy: [18, 36]               // 드라마, 역사
}
```

**이유**: 심층 분석을 보조 지표로 활용

### 최종 추천 프로세스
1. 각 장르별 점수 계산
2. 상위 5개 장르 선택
3. TMDB API로 해당 장르 영화 검색 (평점 7.5+, 평가수 5000+)
4. VS 게임에서 이미 본 영화 제외
5. 중복 제거 후 **최소 4개** 영화 추천

---

## 강도 표현 시스템

퍼센트 대신 **강도 표현**을 사용하여 더 자연스러운 결과를 제공합니다.

| 퍼센트 범위 | 강도 표현 |
|-------------|-----------|
| 80% 이상 | 매우 강하게 |
| 65% 이상 | 강하게 |
| 55% 이상 | 약간 |
| 55% 미만 | 균형있게 |

**예시**:
- ❌ "현실파 100%"
- ✅ "현실파 매우 강하게 선호"

---

## 프로젝트 파일 구조

```
js과제/
├── index.html                      # 메인 페이지
├── src/
│   ├── css/
│   │   ├── style.css              # 메인 스타일
│   │   └── profile-styles.css     # 프로필 모달 스타일
│   ├── js/
│   │   ├── main.js                # 메인 로직 (영화 목록, 검색, 인증)
│   │   ├── tmdbApi.js             # TMDB API 통신 모듈
│   │   ├── popup.js               # 팝업 3단계 로직 (설문, VS게임, 결과)
│   │   ├── modals/
│   │   │   └── modals.js          # 모달 관리 (상세정보, 프로필, 로그인)
│   │   └── vs-game/
│   │       └── vsGameEngine.js    # VS 게임 엔진 (3-Layer 분석 핵심)
│   └── pages/
│       └── popup.html             # 팝업 iframe
└── readme.md                       # 이 파일
```

---

## 주요 파일별 역할

### 1. `index.html`
- 메인 페이지 구조 정의
- 헤더, 검색, 영화 목록, 모달 컨테이너 포함
- 팝업은 iframe으로 로드

### 2. `src/js/main.js`
**메인 페이지 핵심 로직**
- 영화 목록 로드 및 표시
- 검색 기능
- 사용자 인증 (로그인/회원가입)
- Watchlist 관리
- 추천 영화 표시

**주요 함수**:
- `displayMovies()`: 영화 그리드 렌더링
- `handleSearch()`: 검색 처리
- `loadRecommendedMovies()`: 취향 기반 추천 영화 로드

### 3. `src/js/tmdbApi.js`
**TMDB API 통신 모듈**
- API 키 관리
- 영화 검색, 상세정보, 추천 등 API 호출
- 이미지 URL 생성

**주요 함수**:
- `searchMovies(query)`: 영화 검색
- `getCompleteMovieInfo(movieId)`: 영화 상세정보 + 크레딧
- `discoverMovies(params)`: 조건별 영화 검색

### 4. `src/js/popup.js`
**팝업 3단계 로직**
- 1단계: 기본 설문 (장르, 무드, 탐색 스타일)
- 2단계: VS 게임 실행 (vsGameEngine 사용)
- 3단계: 결과 표시 및 추천 영화

**주요 함수**:
- `showFirstPopup()`: 1단계 설문 표시
- `startVSGame()`: 2단계 VS 게임 시작
- `showResultPopup()`: 3단계 결과 및 추천 표시

### 5. `src/js/vs-game/vsGameEngine.js`
**VS 게임 엔진 - 3-Layer 분석 핵심**

**주요 기능**:
- Phase 1 고정 영화 10라운드 관리
- Phase 2 검증 라운드 3개 동적 생성
- 3-Layer 점수 계산 및 신뢰도 조정
- 가중치 기반 추천 영화 생성

**주요 함수**:
- `preloadMovies()`: Phase 1 영화 로드
- `selectMovie(choice)`: 선택 처리 및 점수 기록
- `generatePhase2Rounds()`: Phase 2 검증 라운드 생성
- `getProfileAnalysis()`: 3-Layer 분석 결과 반환
- `getRecommendations(page)`: 가중치 기반 추천 영화 반환

**데이터 구조**:
```javascript
{
  scores: {
    worldview: { reality: 0, fantasy: 0 },
    stimulation: { brain: 0, heart: 0, body: 0 },
    texture: { warm: 0, cold: 0, light: 0, heavy: 0 }
  },
  confidence: {
    worldview: 1.0,
    stimulation: 1.0,
    texture: 1.0
  },
  history: [...]  // 선택 기록
}
```

### 6. `src/js/modals/modals.js`
**모달 관리**
- 영화 상세 정보 모달
- 프로필 모달 (취향 분석 결과 표시)
- 로그인/회원가입 모달
- Watchlist 로그인 필요 모달

**주요 함수**:
- `showMovieDetail(movieId)`: 영화 상세정보 표시
- `showProfileModal()`: 프로필 모달 표시
- `toggleWatchlist(movieId)`: Watchlist 추가/제거

---

## 기술 스택

- **Frontend**: HTML5, CSS3, Vanilla JavaScript (ES6+)
- **API**: TMDB (The Movie Database) API
- **Storage**: LocalStorage (사용자 데이터 저장)
- **Architecture**: 모듈 기반 구조

---

## 사용 방법

### 1. 프로젝트 실행
```bash
# 로컬 서버 실행 (Python)
python -m http.server 8000

# 또는 Chrome에서 직접 열기
start chrome index.html
```

### 2. 첫 방문 시
1. 팝업이 자동으로 열림
2. **1단계**: 선호 장르, 무드, 탐색 스타일 선택
3. **2단계**: VS 게임 진행 (13라운드)
4. **3단계**: 취향 분석 결과 확인 및 추천 영화 확인
5. "시작하기" 버튼 클릭하여 메인 페이지로 이동

### 3. 로그인 (선택)
- 상단 "로그인" 버튼 클릭
- 회원가입 또는 로그인
- 로그인 시 Watchlist 기능 활성화

### 4. 영화 검색
- 상단 검색창에서 영화 제목, 배우, 감독 검색
- 실시간 검색 결과 표시

### 5. 프로필 확인
- 로그인 후 우측 상단 프로필 아이콘 클릭
- 3-Layer 취향 분석 결과 확인

---

## 개발 히스토리

### 주요 업데이트
- **feat**: 3-Layer 취향 분석 시스템 구현
- **feat**: VS 게임 고정 영화 시스템 (동적 → 고정)
- **feat**: 가중치 기반 추천 알고리즘 (50% + 30% + 20%)
- **refactor**: 퍼센트 표시 대신 강도 표현으로 변경
- **design**: 팝업 UI 개선 및 Phase 2 메시지 개선

---

## 라이선스

This project is for educational purposes only.

---

## 참고 자료

- [TMDB API Documentation](https://developers.themoviedb.org/3)
- [JavaScript ES6+ Features](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
